# Implementing User Tags for Wavular RAG

- [x] add user id as a parameter to the chatbot instance constructor (easy)
- remember to tell frontend to populate it

- [x] use the user data tags to traverse dataset for wave 1 semantic search. then use query on their respective metadata. (medium)

- [x] fallback on query when user_goal is empty

- [x] later, update user data when query prompts it (hard)
step 1:
add all user conversations to a json file
- organization is key, organize based on user id
- if user id exists in dataset add conversation to metadata

User goal: Software Engineer at Apple, top_titles: ['Software Engineer at Apple', 'Software Engineer at Apple', 'Machine Learning Engineer at Apple', 'Marketing Manager at Apple', 'Software Engineer at Microsoft']

Intent: feedback and reflection
User goal: Software Engineer at Apple, top_titles: ['Software Engineer at Apple', 'Software Engineer at Apple', 'Machine Learning Engineer at Apple', 'Marketing Manager at Apple', 'Software Engineer at Microsoft']
Formatted prompt: You are a conversational AI designed to assist users in planning and achieving their professional go...
Prompt: <bos><start_of_turn>user
You are a conversational AI designed to assist users in planning and achieving their professional goals. Keep your responses succinct and short when necessary. Ask follow-up questions when appropriate to gather more info about a user. Provide comprehensive, supportive, and actionable advice without mentioning your data sources or referring to specific individuals.

Instructions:
1. The following are example interactions to guide your response style. Do not respond to these examples.
2. After the examples, you will receive context information and the actual user query to respond to.
3. Use the provided context and chat history, but focus on answering the current query.

Example Interactions (DO NOT RESPOND TO THESE):
User: "Show me some successful software engineering journeys"
AI: "I've found several inspiring software engineering journeys for you. Would you like to see journeys that focus on self-taught engineers, those who transitioned from other fields, or those who followed a traditional computer science degree path?"

User: "What job is good for someone interested in technology?"
AI: "There are many great jobs for someone interested in technology, such as software developer, data analyst, and IT support specialist. Which area interests you the most?"

User: "Can you recommend some resources for learning Python?"
AI: "Certainly! Based on your goal of becoming a software engineer, here are some great resources for learning Python: 1) Codecademy's Python course, 2) 'Python Crash Course' book by Eric Matthes, 3) FreeCodeCamp's Python tutorials on YouTube. Would you like me to add these to your personal learning plan?"

User: "I've completed an online course on Python. What's next?"
AI: "Great job on completing the course! Next, you could work on some practical projects to apply what you've learned. Would you like suggestions for beginner projects?"

User: "I want to become a software engineer."
AI: "That's a fantastic goal! Let's start by setting some specific milestones. Do you have any programming experience, or are you starting from scratch?"

User: "I'm feeling stuck in my current role. Any advice?"
AI: "I'm sorry to hear you're feeling stuck. Let's reflect on your situation. What aspects of your current role are you finding challenging or unfulfilling? Understanding this can help us identify potential next steps or areas for growth."

END OF EXAMPLE INTERACTIONS

Context Information (use this to inform your response, but do not mention it directly):
High School - Activities: Coding club, AP Computer Science course, High School - Tools: Codecademy (Python basics), Khan Academy (AP Computer Science prep), Undergraduate Degree - Degree: Bachelors in Computer Science from University of Iowa, Undergraduate Degree - Projects: Developed a personal finance management app, Undergraduate Degree - Internships: Summer internship at a local tech startup, Undergraduate Degree - Tools: GitHub (version control), Visual Studio Code (coding IDE), LeetCode (coding practice), First Job - Position: Junior Developer at a mid-sized tech company, First Job - Projects: Worked on improving backend systems for e-commerce platform, First Job - Tools: Docker (containerization), AWS (cloud services), Jenkins (CI/CD), Advanced Skills Development - Courses: Completed an online Machine Learning course from Coursera, Advanced Skills Development - Certifications: AWS Certified Solutions Architect, Advanced Skills Development - Tools: TensorFlow (machine learning), Jupyter Notebooks (data analysis), Coursera (online courses), Networking and Job Search - Activities: Attended tech meetups, contributed to open-source projects, Networking and Job Search - Tools: LinkedIn (networking), GitHub (open-source contributions), HackerRank (coding challenges), Goal - Achieved Position: Software Engineer at Apple, Goal - Sources: Apple's job portal, referral from a former colleague, LeetCode for interview preparation

Actual User Interaction:
Chat History:
User: What is the journey I am looking at right now?

END OF ACTUAL USER INTERACTION

Actual User Data:
User Data:
UserID: 1
Username: aidanandrews
Email: aidansa2@illinois.edu
ProfilePicture: profile1.png
JoinDate: 2022-01-15
LastLogin: 2024-07-16
Goal: Software Engineer at Apple
Tasks: Undergraduate degree; boot camp
Progress: Completed project management basics course; Attended 3 public speaking sessions
InteractionHistory: 2024-07-01: Set goal to become a Software Engineer at Apple

Current User Query: What is the journey I am looking at right now?

Respond to the current user query above, using the context, user data, and chat history to inform your response. Ensure a seamless and engaging interaction, akin to guidance from an experienced mentor, while maintaining a second-person point of view and focusing on helping the user plan their experiences.<end_of_turn>
<start_of_turn>model

Asking to truncate to max_length but no maximum length is provided and the model has no predefined maximum length. Default to no truncation.
Saving new message: ['User: What is the journey I am looking at right now?', "AI: It looks like you're focused on becoming a Software Engineer at Apple.  That's a great goal!  Based on your progress so far, you're on a path that involves  building a strong technical foundation and developing relevant skills.  \n\nTo give you a clearer picture of your journey, tell me: what aspects of the Software Engineer role at Apple are most appealing to you?  Understanding your interests will help me tailor the next steps. \n\n\n\n"]
Saving chat_history for 1
Full response: It looks like you're focused on becoming a Software Engineer at Apple.  That's a great goal!  Based on your progress so far, you're on a path that involves  building a strong technical foundation and developing relevant skills.  

To give you a clearer picture of your journey, tell me: what aspects of the Software Engineer role at Apple are most appealing to you?  Understanding your interests will help me tailor the next steps. 




[24/Jul/2024 21:16:00] "POST /llm/chat/ HTTP/1.1" 200 436

## Data Updating:
User data before update:
``` csv
UserID	Username	Email	ProfilePicture	JoinDate	LastLogin	Goal	Tasks	Progress	InteractionHistory
1	aidanandrews	aidansa2@illinois.edu	profile1.png	2022-01-15	2024-07-16	Software Engineer at Apple	["Focus on technical skills specific to Apple's tech stack", 'Start working on personal coding projects']	Completed project management basics course; Attended 3 public speaking sessions	
2	joe	janedoe@example.com	profile2.png	2023-03-20	2024-07-16	transition to data science	['Continue Python training, focus on data types']	Completed Python basics course; Started data analysis project	
```
Conversation with LLM:
``` json
{
      "timestamp": "2024-07-25T17:42:26.059992+00:00",
      "sender": "user",
      "message": "Hello"
    },
    {
      "timestamp": "2024-07-25T17:42:26.060034+00:00",
      "sender": "bot",
      "message": "Hi Joe, it's great to see you back!  How's your Python journey going so far?  Anything in particular you're finding challenging or exciting?  \n\n"
    },
    {
      "timestamp": "2024-07-25T17:43:59.626336+00:00",
      "sender": "user",
      "message": "I want to change my goal to Data Scientist at Amazon"
    },
    {
      "timestamp": "2024-07-25T17:43:59.626354+00:00",
      "sender": "bot",
      "message": "That's fantastic, Joe!  Amazon is a great company to aim for in data science.  To help me give you the best advice, tell me, what aspects of data science are you most interested in?  For example, are you drawn to machine learning, data visualization, or something else entirely? \n\n\n\n"
    },
    {
      "timestamp": "2024-07-25T17:48:09.546252+00:00",
      "sender": "user",
      "message": "I just finished my data analysis project"
    },
    {
      "timestamp": "2024-07-25T17:48:09.546271+00:00",
      "sender": "bot",
      "message": "That's great to hear, Joe! Finishing a data analysis project is a fantastic accomplishment.  Now that you have that under your belt, what are you most excited to explore next with Python?  Perhaps diving into data structures and algorithms, or maybe you're eager to start working with some real-world datasets?  Tell me more about what sparks your interest! \n\n\n\n"
    }
```
After 
```
(journeys) aidan@aidan-pc:~/Code/Proj/journeys/chatbot$ python3 llm/data_update.py
User data has been updated and saved to 'data/users.csv'
```
User data after update:
``` csv
UserID	Username	Email	ProfilePicture	JoinDate	LastLogin	Goal	Tasks	Progress	InteractionHistory
1	aidanandrews	aidansa2@illinois.edu	profile1.png	2022-01-15	2024-07-16	Software Engineer at Apple	["Focus on technical skills specific to Apple's tech stack", 'Start working on personal coding projects']	Completed project management basics course; Attended 3 public speaking sessions	
2	joe	janedoe@example.com	profile2.png	2023-03-20	2024-07-16	Data Scientist at Amazon	['Continue Python training, focus on data types']	Completed Python basics course; Started and completed data analysis project	
```